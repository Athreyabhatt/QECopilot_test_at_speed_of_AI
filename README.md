# QECopilot - AI-Powered Test Automation

**Autonomous test script generation using GitHub Copilot CLI in agent mode**

## 📖 Complete Documentation

For comprehensive setup instructions, framework selection, and usage guide, see:  
**[COMPREHENSIVE_GUIDE.md](COMPREHENSIVE_GUIDE.md)**

## 🚀 Quick Overview

QECopilot is an AI-powered system that automatically generates test automation scripts from Gherkin feature files using GitHub Copilot in autonomous agent mode. It runs directly in your GitHub Actions CI/CD pipeline.

### Key Benefits
- **80-95% reduction** in test scripting time
- **Instant test generation** from feature files
- **Zero manual coding** for test automation
- **Continuous testing** at development speed
- **Framework agnostic** - Works with Playwright, Selenium, WebdriverIO

## 📁 Repository Structure

```
QECopilot_test_at_speed_of_AI/
├── .github/
│   ├── workflows/
│   │   ├── QECopilot_GithubActions_integreated_workflow.yml
│   │   └── QECopilot_GithubActions_dedicated_workflow.yml
│   └── instructions/
│       ├── QECopilot-playwright-typescript-instructions.md
│       ├── QECopilot-playwright-java-instructions.md
│       ├── QECopilot-selenium-java-instructions.md
│       ├── QECopilot-webdriverio-typescript-instructions.md
│       └── README.md
├── COMPREHENSIVE_GUIDE.md          # Complete documentation
├── QECopilot.MD                    # Demo guide (live demo script)
├── QECopilot_Presentation.md       # Presentation content
└── README.md                       # Quick overview
```

**Note:** This repository contains only configuration files. Test automation files (`features/`, `pages/`, `steps/`, `package.json`) are created by users and auto-generated by Copilot during implementation.

## ✨ Key Features

- **🤖 Autonomous Generation** - Copilot CLI generates test code without manual approval
- **📦 Smart Setup** - Creates package.json/pom.xml on first run, skips on subsequent runs
- **🔒 Secure** - Uses GitHub's native authentication, no external API keys
- **🎯 Context-Aware** - Understands repository structure and coding patterns
- **⚡ Fast** - Runs in parallel with your CI/CD pipeline
- **🔧 Customizable** - Modify instructions to match your coding standards
- **🛠️ Framework Agnostic** - Supports multiple automation tools and languages

## 🎬 How It Works

1. **Developer** creates/modifies a Gherkin feature file
2. **Developer** opens a Pull Request
3. **GitHub Actions** triggers the workflow
4. **Copilot CLI** reads the feature file and instructions
5. **Copilot Agent** generates Page Object and Step Definition files
6. **Workflow** installs dependencies and runs tests
7. **Bot** commits generated files back to the PR

## 🛠️ Quick Start

### Prerequisites

- GitHub Copilot subscription
- GitHub repository with Actions enabled
- Node.js 18+

### Setup (5 minutes)

1. **Copy the entire `.github/` directory** to your repository
   ```bash
   cp -r .github your-repo/
   ```
   This includes:
   - Workflow files in `.github/workflows/`
   - Instructions files in `.github/instructions/`

2. **Choose your automation stack** by editing the workflow file:
   ```yaml
   env:
     # Options: playwright-typescript, playwright-java, selenium-java, webdriverio-typescript
     AUTOMATION_STACK: playwright-typescript
   ```

3. **Create** `features/` directory
   ```bash
   mkdir your-repo/features
   ```

4. **Add** your first `.feature` file
   ```gherkin
   # your-repo/features/login.feature
   Feature: User Login
     Scenario: Successful login
       Given I am on the login page
       When I enter valid credentials
       Then I should see the dashboard
   ```

5. **Open** a Pull Request and watch the magic happen! ✨

## 🛠️ Supported Automation Stacks

QECopilot supports multiple automation frameworks and languages:

| Stack | Framework | Language | Package Manager | Best For |
|-------|-----------|----------|-----------------|----------|
| **playwright-typescript** | Playwright | TypeScript | npm | Modern web apps, fast execution ⚡ |
| **playwright-java** | Playwright | Java | Maven | Java projects, enterprise apps |
| **selenium-java** | Selenium | Java | Maven | Legacy apps, wide browser support |
| **webdriverio-typescript** | WebdriverIO | TypeScript | npm | Node.js projects, mobile testing |

### Choosing Your Stack

Edit the `AUTOMATION_STACK` environment variable in your workflow file:

```yaml
env:
  AUTOMATION_STACK: playwright-typescript  # Change this to your preferred stack
```

Each stack has its own instruction file in `.github/instructions/` that defines:
- Dependencies (package.json or pom.xml)
- Page Object Model patterns
- Step Definition patterns
- Locator strategies
- Assertion libraries

See [.github/instructions/README.md](.github/instructions/README.md) for detailed information about each stack.


## 📖 Table of Contents

- [What is QECopilot?](#-what-is-qecopilot)
- [Repository Structure](#-repository-structure-configuration-only)
- [Key Features](#-key-features)
- [How It Works](#-how-it-works)
- [Quick Start](#️-quick-start)
- [Implementation Details](#-implementation-details)
- [Use Cases](#-use-cases)
- [Customization](#-customization)
- [Security](#-security)
- [Troubleshooting](#-troubleshooting)
- [Agent Instructions](#-agent-instructions)

## 🎯 Use Cases

### Scenario 1: Integrated Dev & QA Team
- Tests run against local build
- Single workflow for both dev and QA
- Fast feedback loop
- **Workflow**: `.github/workflows/QECopilot_GithubActions_integreated_workflow.yml`

### Scenario 2: Separate QA Team
- Tests run against non-prod environment
- QA team has separate branches
- Environment-specific testing
- **Workflow**: `.github/workflows/QECopilot_GithubActions_dedicated_workflow.yml`

## 🔧 Customization

### Modify Agent Behavior

Edit `.github/QECopilot-instructions.md` to customize:
- Code generation patterns
- Locator strategies
- Naming conventions
- Framework preferences

### Adjust Workflows

Edit `.github/workflows/*.yml` to:
- Change trigger conditions
- Modify tool permissions
- Add custom steps
- Configure environments

## 🔐 Security

- ✅ Uses GitHub's native `GITHUB_TOKEN`
- ✅ Granular tool permissions (`--allow-tool`, `--deny-tool`)
- ✅ No external API keys required
- ✅ Runs in isolated GitHub Actions environment
- ✅ All changes require PR review before merge

## 📊 Benefits

### Time & Productivity
- **⏱️ 80-95% reduction** in test scripting time
- **🚀 2x faster releases** - Tests generated at AI speed
- **👥 QE empowerment** - Focus on strategy, not scripting
- **📈 Infinite scalability** - Generate tests as fast as features are written
- **💰 Early bug detection** - Catch issues in PR, not production

### Cost to Run QECopilot

**Monthly Cost: ~$20-30**

Breakdown:
- **GitHub Copilot Subscription**: $10-19/month
  - Individual: $10/month
  - Business: $19/month per user
  - Enterprise: $39/month per user
- **GitHub Actions Minutes**: $5-10/month
  - 2,000 free minutes included
  - Additional: $0.008/minute
  - Typical usage: ~$5-10/month

**What's Included:**
- ✅ 24/7 availability
- ✅ All frameworks (Playwright, Selenium, WebdriverIO)
- ✅ Unlimited test generation
- ✅ No LLM API costs (uses GitHub Copilot)
- ✅ No infrastructure costs
- ✅ No maintenance costs
- ✅ Zero training costs
- ✅ Framework switching at no additional cost

**Annual Cost:**
```
Individual Plan:    $180-240/year
Business Plan:      $300-360/year per user
Enterprise Plan:    $540-600/year per user
```

## 🧪 Example Feature File

```gherkin
Feature: User Login
  As a user
  I want to log into the application
  So that I can access my account

  Scenario: Successful login
    Given I am on the login page
    When I enter username "testuser"
    And I enter password "testpass123"
    And I click the login button
    Then I should see the dashboard
```

**Copilot will automatically generate:**
- `pages/login.page.ts` - Page Object Model
- `steps/login.steps.ts` - Step Definitions
- `package.json` - Dependencies (first run only)

## 🔧 Implementation Details

### GitHub Copilot CLI Autonomous Mode

QECopilot uses the GitHub Copilot CLI with autonomous execution:

```bash
copilot -p "prompt" \
  --allow-tool 'write' \
  --deny-tool 'shell(rm)' \
  --deny-tool 'shell(git push)'
```

**Command Breakdown:**
- `copilot` - Launches GitHub Copilot CLI
- `-p "prompt"` - Programmatic mode with direct prompt input
- `--allow-tool 'write'` - Allows file writing without approval
- `--deny-tool 'shell(rm)'` - Prevents file deletion for safety
- `--deny-tool 'shell(git push)'` - Prevents unauthorized git pushes

### Workflow Execution Flow

```
Developer creates/modifies .feature file
         ↓
Opens Pull Request to main
         ↓
GitHub Actions triggers workflow
         ↓
Installs Copilot CLI
         ↓
Authenticates with GITHUB_TOKEN
         ↓
Copilot reads feature + instructions
         ↓
[First Run] Creates package.json
[Subsequent] Skips package.json
         ↓
Generates .page.ts and .steps.ts files
         ↓
npm install (dependencies)
         ↓
Installs Playwright browsers
         ↓
Runs tests (cucumber-js)
         ↓
Commits generated files to PR
         ↓
Done! ✅
```

### Prompt Engineering

The prompt sent to Copilot includes:

```bash
copilot -p "You are a test automation code generator.

Feature File:
$FEATURE_CONTENT

Instructions:
$INSTRUCTIONS

Task: Generate Page Object Model (.page.ts) and Step Definition (.steps.ts) files 
following the instructions. Write the files to pages/ and steps/ directories."
```

## 📋 Agent Instructions

The `.github/QECopilot-instructions.md` file defines how Copilot generates code. Key specifications:

### Core Objective
- Read Gherkin `.feature` files
- Generate Page Object Model (`.page.ts`) files
- Generate Step Definition (`.steps.ts`) files
- **First run**: Create `package.json` with dependencies
- **Subsequent runs**: Skip `package.json`, generate tests only

### Technical Specifications

**Page Object Model (POM)**
- Class-based structure (e.g., `LoginPage`)
- Import `Page` and `Locator` from `@playwright/test`
- Use user-facing locators: `page.getByRole()`, `page.getByLabel()`, `page.getByText()`
- Async methods for user actions
- TSDoc comments for all public methods

**Step Definitions**
- Import `Given`, `When`, `Then` from `@cucumber/cucumber`
- Instantiate Page Objects within step functions
- Use Playwright's `expect` assertions for validation
- Environment-agnostic URLs using `process.env.BASE_URL`

**Code Quality**
- Clean, readable TypeScript
- Strong typing
- Async/await for all operations
- No hardcoded URLs or credentials

### Guardrails
- ✅ Generate only `.page.ts`, `.steps.ts`, and `package.json` (first run)
- ❌ Do NOT run `npm install`
- ❌ Do NOT execute tests
- ❌ Do NOT interact with git
- ❌ Do NOT modify configuration files

## 🆘 Troubleshooting

### Copilot CLI Authentication Failed
**Solution:**
- Verify Copilot subscription is active
- Check `GITHUB_TOKEN` has proper permissions
- Ensure workflow has `contents: write` permission

### Files Not Generated
**Solution:**
- Review workflow logs in GitHub Actions tab
- Check Copilot tool permissions in workflow
- Verify `.github/QECopilot-instructions.md` exists

### Tests Fail to Run
**Solution:**
- Ensure `package.json` was created (check first run logs)
- Verify Playwright browsers were installed
- Check `npm install` completed successfully

### BASE_URL Not Found (Separate QA Workflow)
**Solution:**
- Go to Repository Settings → Environments
- Create `non-prod` environment
- Add `BASE_URL` variable with your non-prod URL

### Generated Code Has Errors
**Solution:**
- Review and customize `.github/QECopilot-instructions.md`
- Add more specific instructions for your use case
- Provide examples in the instructions file

## 📞 Support

- **Workflow Logs**: GitHub Actions tab in your repository
- **GitHub Copilot**: [Official Documentation](https://docs.github.com/en/copilot)
- **Issues**: Open an issue in this repository

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test with a Pull Request
5. Submit for review

## 📝 License

MIT License - See LICENSE file for details

---

**Ready to get started?** Copy the `.github/` directory to your project and let Copilot generate your test automation code automatically! 🚀
